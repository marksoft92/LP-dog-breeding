(()=>{function w(t,e=200){let o;return function(...n){let s=this;clearTimeout(o),o=setTimeout(()=>t.apply(s,n),e)}}var g=(t,e)=>c(t,"transitionend",e);var x=(t,e=null,o=d)=>{let n=f(t,o);if(!n)return 0;n.classList.add("run"),e&&g(t,e)};var y;window.d=document;window.body=d.body;window.bc=body.classList;window.cfjsConfig={};var b=()=>innerWidth<window.cfjsConfig.mobileMaxWidth||innerWidth<innerHeight;window.isMob=b();var M=({delayLoading:t=100,mobileMaxWidth:e=980,onScrollThrottle:o=10,onMouseMoveThrottle:n=10,onSwipeMoveThrottle:s=10,loadedAnimAfter:l,preloader:r=!1,preloaderText:h="Идет загрузка..."}={})=>{L(".page-top",m=>{bc.toggle("is-scroll",m.intersectionRatio===0)});let a;r&&(a=setTimeout(()=>{u(".preloader").textContent=h},300)),Object.assign(cfjsConfig,{mobileMaxWidth:e,onScrollThrottle:o,onMouseMoveThrottle:n,onSwipeMoveThrottle:s}),c(window,"load",()=>{setTimeout(()=>{bc.add("loaded"),r&&clearTimeout(a),l?g(l,y):y()},t)})},C=new Promise(t=>y=t),u=(t,e=d)=>e.querySelector(t);var f=(t,e=d)=>typeof t=="string"?u(t,e):t;var L=(t,e,o={rootMargin:"0px",threshold:.2})=>{let n=f(t);if(n){let s=new IntersectionObserver(([l])=>{e(l,l.target)},o);return s.observe(n),s}},c=(t,e,o)=>{let n=typeof t=="string"?u(t):t;n&&n.addEventListener(e,o)};var S=[],T=t=>{S.push(t)},i=new Map;function j(t){let e=t.target;if(e.tagName==="A"&&e.hash){let n=e.hash.slice(1);for(let s of S)s(t,n)}let o=e.closest("[data-action]");if(o){let n=o.dataset.action.split(" ");for(let s of n)if(i.get(s))for(let r of i.get(s)||[])r(t);else for(let[r,h]of i)if(r instanceof RegExp){let a=s.match(r);if(a)for(let m of h)m(t,a)}}}var p=(t,e)=>{i.size||window.addEventListener("click",j),i.has(t)||i.set(t,[]),i.get(t).push(e)};var A=[];var R=[];c(window,"resize",w(t=>{let e=b();if(e!==window.isMob){let o=e?"mob":"pc";for(let n of R)n(t,o);window.isMob=e}for(let o of A)o(t||{})}));var k=t=>{C.then(t)};M({loadedAnimAfter:".header",onScrollThrottle:10});k(()=>{x(".footer",()=>x("#start"))});p("header-burger",()=>{bc.toggle("header-menu-active")});p(/modal-(active|close)-(.+)/,(t,[e,o])=>{bc.toggle(e,o==="active"),gtag("event",o)});p(/(overlay|close-modal)/,()=>{bc.forEach(t=>{if(t.includes("modal-active")){bc.remove(t);let e=$("."+t.replace("-active-","-"));e.classList.forEach(o=>{o.startsWith("is-")&&setTimeout(()=>{e.classList.remove(o)},300)}),gtag("event",t.replace("active","close"))}})});T(()=>{bc.remove("header-menu-active")});})();
//# sourceMappingURL=index.js.map
